<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Personal Gallery</title>
    <style>
      
   
      .carousel-container {
        max-width: 600px;
        margin: 0 auto;    
        
       
      }

      .carousel-container:hover{
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        
      }
      .carousel-item img {
        transition: transform 0.3s ease;
        cursor: pointer;
        height: 40vw;      /* Increased height */
        object-fit:cover;  /* Keeps the image aspect ratio within the defined height */
      }
      .carousel-item img:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      }

      .modal-body {
      padding: 0; /* Remove default padding */
      height: auto; /* Allow height to adjust based on content */
      
      
    }
      .modal-body img {
        width: 100%; /* Responsive image in modal */
      height: 50vh; /* Set height to fill the modal */
      object-fit: cover; /* Cover the area while maintaining aspect ratio */
      border-radius: 0; /* No rounded corners */
      }
      .form-container, .feedback-section {
  max-width: 600px; /* Customize as needed */
  margin: 0 auto; /* Center horizontally */
}

.form-control {
      border: 1px solid #6c757d; /* Bootstrap secondary color */
    }
    .form-control:focus {
      border-color: #6c757d;
      box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.25);
    }
.form-select{
  border: 1px solid #6c757d;
}
.form-select:focus {
      border-color: #6c757d;
      box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.25);
    }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body class="p-3 m-0 border-0 bd-example m-0 border-0">
    
  
    <div class="text-center mb-4">
      <h1>Some Personal Pictures I've Taken</h1>
      <p>A glimpse into some cherished moments</p>
    </div>

    <!-- Carousel Gallery with a larger container -->
    <div id="imageCarousel" class="carousel slide carousel-container" data-bs-ride="carousel">
      <div class="carousel-inner">
        <!-- Carousel Item 1 -->
        <div class="carousel-item active">
          <img src="images/w.jpeg" class="d-block w-100" alt="Personal Image 1" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="images/w.jpeg">
        </div>
        
        <div class="carousel-item">
          <img src="images/o.jpeg" class="d-block w-100" alt="Personal Image 2" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="images/o.jpeg">
        </div>
        
        <div class="carousel-item">
          <img src="images/mz.jpeg" class="d-block w-100" alt="Personal Image 3" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="images/mz.jpeg">
        </div>

        <div class="carousel-item">
          <img src="images/1.JPG" class="d-block w-100" alt="Personal Image 3" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="images/1.JPG">
        </div>

        <div class="carousel-item">
          <img src="images/2.JPG" class="d-block w-100" alt="Personal Image 3" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="images/2.JPG">
        </div>

        <div class="carousel-item">
          <img src="images/3.JPG" class="d-block w-100" alt="Personal Image 3" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="images/3.JPG">
        </div>
        
      </div>

      <!-- Carousel Controls -->
      <button class="carousel-control-prev" type="button" data-bs-target="#imageCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#imageCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <!-- Modal for image preview and download button -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
          
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body text-center">
            <img id="modalImage" src="" class="img-fluid" alt="Modal Image">
          </div>
          <div class="modal-footer">
            <a id="downloadButton" href="#" download class="btn btn-primary">Download</a>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>


<!-- Feedback Form -->
<div class="form-container mt-5">
  <h2 class="text-center mb-4">We Value Your Feedback!</h2>
  <form id="feedbackForm">
    <div class="mb-3">
      <label for="userName" class="form-label">Your Name</label>
      <input type="text" class="form-control" id="userName" placeholder="Enter your name">
    </div>

    <div class="mb-3">
      <label for="userEmail" class="form-label">Your Email (optional)</label>
      <input type="email" class="form-control" id="userEmail" placeholder="Enter your email (optional)">
    </div>

    <div class="mb-3">
      <label for="satisfaction" class="form-label">How satisfied are you with the gallery?</label>
      <select class="form-select" id="satisfaction">
        <option value="very-satisfied">Very Satisfied</option>
        <option value="satisfied">Satisfied</option>
        <option value="neutral">Neutral</option>
        <option value="dissatisfied">Dissatisfied</option>
        <option value="very-dissatisfied">Very Dissatisfied</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="favoriteImage" class="form-label">Which image did you like the most?</label>
      <select class="form-select" id="favoriteImage">
        <option value="image1">Image 1</option>
        <option value="image2">Image 2</option>
        <option value="image3">Image 3</option>
        <option value="image4">Image 4</option>
        <option value="image5">Image 5</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="userComment" class="form-label">Leave a Comment</label>
      <textarea class="form-control" id="userComment" rows="4" placeholder="Your thoughts..."></textarea>
    </div>

    <button type="submit" class="btn btn-secondary">Submit Feedback</button>
  </form>
</div>

<div class="feedback-section mt-5" id="commentsSection">
  <h2 class="text-center mb-4">User Feedback</h2>
  <div id="commentsList"></div> <!-- This is where the comments will be displayed -->
</div>

<script>
// Function to get stored comments from localStorage
function getStoredComments() {
  let comments = localStorage.getItem('userComments');
  return comments ? JSON.parse(comments) : []; // Return the parsed comments or an empty array
}

// Function to display stored comments
function displayComments() {
  const comments = getStoredComments();
  const commentsList = document.getElementById('commentsList');
  commentsList.innerHTML = ''; // Clear the list before re-rendering

  // Iterate through the comments and display each one
  comments.forEach((comment, index) => {
    const commentElement = document.createElement('div');
    commentElement.classList.add('comment');
    commentElement.innerHTML = `
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">${comment.userName} <small class="text-muted">(${comment.userEmail || 'No email provided'})</small></h5>
          <p class="card-text"><strong>Satisfaction:</strong> ${comment.satisfaction}</p>
          <p class="card-text"><strong>Favorite Image:</strong> ${comment.favoriteImage}</p>
          <p class="card-text"><strong>Comment:</strong> ${comment.userComment}</p>
          <button class="btn btn-danger btn-sm" onclick="deleteComment(${index})">Delete</button>
        </div>
      </div>
    `;
    commentsList.appendChild(commentElement);
  });
}

// Function to delete a comment
function deleteComment(index) {
  // Get the current list of comments from localStorage
  const comments = getStoredComments();

  // Remove the comment at the specified index
  comments.splice(index, 1);

  // Save the updated list of comments back to localStorage
  localStorage.setItem('userComments', JSON.stringify(comments));

  // Re-display the updated comments list
  displayComments();
}

// Handling form submission and saving comments to localStorage
document.getElementById('feedbackForm').addEventListener('submit', function(event) {
  event.preventDefault();  

  // Get values from the form inputs
  const userName = document.getElementById('userName').value;
  const userEmail = document.getElementById('userEmail').value;
  const satisfaction = document.getElementById('satisfaction').value;
  const favoriteImage = document.getElementById('favoriteImage').value;
  const userComment = document.getElementById('userComment').value;

  // If any required fields are empty, alert the user
  if (!userName || !userComment) {
    alert('Please fill in all the required fields.');
    return;
  }

  const newComment = {
    userName,
    userEmail,
    satisfaction,
    favoriteImage,
    userComment
  };

  // Get existing comments, add the new one, and store it back in localStorage
  const comments = getStoredComments();
  comments.push(newComment);
  localStorage.setItem('userComments', JSON.stringify(comments));

  document.getElementById('feedbackForm').reset();

  // Re-display the updated comments list
  displayComments();
});

displayComments();
</script>

<script>
      // Script to update modal with the clicked image and set download link
      const imageModal = document.getElementById('imageModal');
      imageModal.addEventListener('show.bs.modal', function (event) {
        const button = event.relatedTarget;
        const imageUrl = button.getAttribute('data-bs-image');
        const modalImage = document.getElementById('modalImage');
        const downloadButton = document.getElementById('downloadButton');
        
        modalImage.src = imageUrl;
        downloadButton.href = imageUrl;
      });
</script>
</body>
</html>